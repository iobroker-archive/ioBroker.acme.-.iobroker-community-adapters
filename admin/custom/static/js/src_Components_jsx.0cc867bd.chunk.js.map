{"version":3,"file":"static/js/src_Components_jsx.0cc867bd.chunk.js","mappings":"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","sources":["AcmeComponent.jsx","Components.jsx"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { LinearProgress, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, Paper } from '@mui/material';\n// important to make from package and not from some children.\n// invalid\n// import I18n from '@iobroker/adapter-react-v5/Components/I18n';\n// valid\nimport { I18n } from '@iobroker/adapter-react-v5';\nimport { ConfigGeneric } from '@iobroker/json-config';\n\nconst styles = {\n    table: {\n        minWidth: 400,\n    },\n    header: {\n        fontSize: 16,\n        fontWeight: 'bold',\n    },\n    ok: {\n        color: '#0ba20b',\n    },\n    warn: {\n        color: '#f57d1d',\n    },\n    error: {\n        color: '#c42c3a',\n    },\n};\n\nclass AcmeComponent extends ConfigGeneric {\n    constructor(props) {\n        super(props);\n        this.socket = this.props.oContext ? this.props.oContext.socket : this.props.socket;\n        Object.assign(this.state, {\n            collections: null,\n        });\n    }\n\n    async componentDidMount() {\n        super.componentDidMount();\n        await this.readData();\n        await this.socket.subscribeObject('system.certificates', this.onCertsChanged);\n    }\n\n    async readData(obj) {\n        let collections = obj || (await this.socket.getObject('system.certificates'));\n        if (collections?.native?.collections) {\n            collections = collections.native.collections;\n        } else {\n            collections = {};\n        }\n\n        this.setState({ collections });\n    }\n\n    async componentWillUnmount() {\n        await this.socket.unsubscribeObject('system.certificates', this.onCertsChanged);\n    }\n\n    onCertsChanged = (id, obj) => {\n        if (id === 'system.certificates' && obj) {\n            this.readData(obj).catch(() => {});\n        }\n    };\n\n    renderItem() {\n        if (!this.state.collections) {\n            return <LinearProgress />;\n        }\n\n        return (\n            <div style={{ width: '100%' }}>\n                <h4>{I18n.t('custom_acme_title')}</h4>\n                <TableContainer\n                    component={Paper}\n                    style={{ width: '100%' }}\n                >\n                    <Table\n                        style={{ width: '100%' }}\n                        size=\"small\"\n                    >\n                        <TableHead>\n                            <TableRow>\n                                <TableCell>{I18n.t('custom_acme_id')}</TableCell>\n                                <TableCell>{I18n.t('custom_acme_status')}</TableCell>\n                                <TableCell>{I18n.t('custom_acme_domains')}</TableCell>\n                                <TableCell>{I18n.t('custom_acme_staging')}</TableCell>\n                                <TableCell>{I18n.t('custom_acme_expires')}</TableCell>\n                                <TableCell></TableCell>\n                            </TableRow>\n                        </TableHead>\n                        <TableBody>\n                            {Object.keys(this.state.collections).map(id => {\n                                const collection = this.state.collections[id];\n                                let status;\n                                if (new Date(collection.tsExpires).getTime() > Date.now() && !collection.staging) {\n                                    status = <span style={styles.ok}>OK</span>;\n                                } else if (new Date(collection.tsExpires).getTime() <= Date.now()) {\n                                    status = <span style={styles.error}>{I18n.t('custom_acme_expired')}</span>;\n                                } else if (collection.staging) {\n                                    status = <span style={styles.warn}>{I18n.t('custom_acme_staging')}</span>;\n                                }\n\n                                return (\n                                    <TableRow\n                                        key={id}\n                                        sx={{ '&:last-child td, &:last-child th': { border: 0 } }}\n                                    >\n                                        <TableCell\n                                            component=\"th\"\n                                            scope=\"row\"\n                                        >\n                                            {id}\n                                        </TableCell>\n                                        <TableCell>{status}</TableCell>\n                                        <TableCell>{collection.domains.join(', ')}</TableCell>\n                                        <TableCell style={collection.staging ? styles.warn : undefined}>\n                                            {collection.staging ? 'âœ“' : ''}\n                                        </TableCell>\n                                        <TableCell\n                                            style={\n                                                new Date(collection.tsExpires).getTime() < Date.now()\n                                                    ? styles.error\n                                                    : undefined\n                                            }\n                                        >\n                                            {new Date(collection.tsExpires).toLocaleString()}\n                                        </TableCell>\n                                    </TableRow>\n                                );\n                            })}\n                        </TableBody>\n                    </Table>\n                </TableContainer>\n            </div>\n        );\n    }\n}\n\nAcmeComponent.propTypes = {\n    socket: PropTypes.object, // this is in oContext\n    oContext: PropTypes.object.isRequired,\n    themeType: PropTypes.string, // this is in oContext\n    themeName: PropTypes.string,\n    style: PropTypes.object,\n    data: PropTypes.object.isRequired,\n    attr: PropTypes.string,\n    schema: PropTypes.object,\n    onError: PropTypes.func,\n    onChange: PropTypes.func,\n};\n\nexport default AcmeComponent;\n","import AcmeComponent from './AcmeComponent';\n\nexport default { AcmeComponent };\n"],"names":["styles","AcmeComponent","props","id","obj","collections","collection","status"],"sourceRoot":""}