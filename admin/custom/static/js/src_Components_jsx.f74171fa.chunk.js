(self.webpackChunkiobroker_admin_component_acme=self.webpackChunkiobroker_admin_component_acme||[]).push([["src_Components_jsx"],{50477:(()=>{}),89259:((z,f,l)=>{"use strict";l.r(f),l.d(f,{default:()=>G});var t=l(77810),y=l(75826),a=l.n(y),E=l(57129),A=l(90925),b=l(2981),C=l(99793),j=l(85762),v=l(27832),o=l(35264),D=l(50627),r=l(17739),x=l(86234),T=Object.defineProperty,O=Object.getPrototypeOf,I=Reflect.get,P=(c,n,e)=>n in c?T(c,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):c[n]=e,w=(c,n,e)=>P(c,typeof n!="symbol"?n+"":n,e),R=(c,n,e)=>I(O(c),e,n),d=(c,n,e)=>new Promise((s,g)=>{var S=i=>{try{h(e.next(i))}catch(p){g(p)}},W=i=>{try{h(e.throw(i))}catch(p){g(p)}},h=i=>i.done?s(i.value):Promise.resolve(i.value).then(S,W);h((e=e.apply(c,n)).next())});const m={table:{minWidth:400},header:{fontSize:16,fontWeight:"bold"},ok:{color:"#0ba20b"},warn:{color:"#f57d1d"},error:{color:"#c42c3a"}};class u extends x.ConfigGeneric{constructor(n){super(n),w(this,"onCertsChanged",(e,s)=>{e==="system.certificates"&&s&&this.readData(s).catch(()=>{})}),this.socket=this.props.oContext?this.props.oContext.socket:this.props.socket,Object.assign(this.state,{collections:null})}componentDidMount(){return d(this,null,function*(){R(u.prototype,this,"componentDidMount").call(this),yield this.readData(),yield this.socket.subscribeObject("system.certificates",this.onCertsChanged)})}readData(n){return d(this,null,function*(){var e;let s=n||(yield this.socket.getObject("system.certificates"));(e=s==null?void 0:s.native)!=null&&e.collections?s=s.native.collections:s={},this.setState({collections:s})})}componentWillUnmount(){return d(this,null,function*(){yield this.socket.unsubscribeObject("system.certificates",this.onCertsChanged)})}renderItem(){return this.state.collections?t.createElement("div",{style:{width:"100%"}},t.createElement("h4",null,r.I18n.t("custom_acme_title")),t.createElement(A.A,{component:b.A,style:{width:"100%"}},t.createElement(C.A,{style:{width:"100%"},size:"small"},t.createElement(j.A,null,t.createElement(v.A,null,t.createElement(o.A,null,r.I18n.t("custom_acme_id")),t.createElement(o.A,null,r.I18n.t("custom_acme_status")),t.createElement(o.A,null,r.I18n.t("custom_acme_domains")),t.createElement(o.A,null,r.I18n.t("custom_acme_staging")),t.createElement(o.A,null,r.I18n.t("custom_acme_expires")),t.createElement(o.A,null))),t.createElement(D.A,null,Object.keys(this.state.collections).map(n=>{const e=this.state.collections[n];let s;return new Date(e.tsExpires).getTime()>Date.now()&&!e.staging?s=t.createElement("span",{style:m.ok},"OK"):new Date(e.tsExpires).getTime()<=Date.now()?s=t.createElement("span",{style:m.error},r.I18n.t("custom_acme_expired")):e.staging&&(s=t.createElement("span",{style:m.warn},r.I18n.t("custom_acme_staging"))),t.createElement(v.A,{key:n,sx:{"&:last-child td, &:last-child th":{border:0}}},t.createElement(o.A,{component:"th",scope:"row"},n),t.createElement(o.A,null,s),t.createElement(o.A,null,e.domains.join(", ")),t.createElement(o.A,{style:e.staging?m.warn:void 0},e.staging?"\u2713":""),t.createElement(o.A,{style:new Date(e.tsExpires).getTime()<Date.now()?m.error:void 0},new Date(e.tsExpires).toLocaleString()))}))))):t.createElement(E.A,null)}}u.propTypes={socket:a().object,oContext:a().object.isRequired,themeType:a().string,themeName:a().string,style:a().object,data:a().object.isRequired,attr:a().string,schema:a().object,onError:a().func,onChange:a().func};const G={AcmeComponent:u}})}]);

//# sourceMappingURL=src_Components_jsx.f74171fa.chunk.js.map